(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{5621:function(e,t,s){Promise.resolve().then(s.bind(s,632))},632:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var a=s(7437),n=s(2265),r=s(5922),i=s(7815),l=s(5754),c=s(1657),o=s(1396),d=s.n(o);function x(){let[e,t]=(0,n.useState)([]),[s,o]=(0,n.useState)({postsThisMonth:0,organizationsCount:0,socialAccountsCount:0}),[x,h]=(0,n.useState)({totalOrganizations:0,activeSubscriptions:0,totalClients:0,totalPosts:0}),[u,m]=(0,n.useState)(!1),[f,g]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{(async()=>{try{let{data:{user:e}}=await r.O.auth.getUser();if(!e)return;let s="sh4m4ni4k@sh4m4ni4k.nl"===e.email;if(m(s),s){let{data:e}=await r.O.from("blog_posts").select("*").order("created_at",{ascending:!1}).limit(10),{data:s}=await r.O.from("organizations").select("id"),{data:a}=await r.O.from("subscriptions").select("id").eq("status","active"),{data:n}=await r.O.from("clients").select("id");t(e||[]),h({totalOrganizations:(null==s?void 0:s.length)||0,activeSubscriptions:(null==a?void 0:a.length)||0,totalClients:(null==n?void 0:n.length)||0,totalPosts:(null==e?void 0:e.length)||0})}else{let{data:s,error:a}=await r.O.from("blog_posts").select("*").order("created_at",{ascending:!1}).limit(5);s&&t(s);let n=new Date().toISOString().slice(0,7),{data:i}=await r.O.from("blog_posts").select("id").gte("created_at","".concat(n,"-01")),{data:l}=await r.O.from("org_members").select("org_id").eq("user_id",e.id),{data:c}=await r.O.from("social_connections").select("id");o({postsThisMonth:(null==i?void 0:i.length)||0,organizationsCount:(null==l?void 0:l.length)||0,socialAccountsCount:(null==c?void 0:c.length)||0})}}catch(e){console.error("Error fetching dashboard data:",e)}finally{g(!1)}})()},[]),f)?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white",children:u?"Admin Dashboard":"Dashboard"}),(0,a.jsx)("p",{className:"text-gray-300 mt-2",children:u?"System overview and management tools for Timeline Alchemy.":"Welcome back! Here's what's happening with your content."})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.Zb,{className:"bg-gray-800 border-gray-700",children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ll,{className:"text-sm font-medium text-white",children:"Total Organizations"}),(0,a.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFE2"})]}),(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:x.totalOrganizations}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"All registered organizations"})]})]}),(0,a.jsxs)(i.Zb,{className:"bg-gray-800 border-gray-700",children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ll,{className:"text-sm font-medium text-white",children:"Active Subscriptions"}),(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCB3"})]}),(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:x.activeSubscriptions}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"Paying customers"})]})]}),(0,a.jsxs)(i.Zb,{className:"bg-gray-800 border-gray-700",children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ll,{className:"text-sm font-medium text-white",children:"Total Clients"}),(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDC65"})]}),(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:x.totalClients}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"Client accounts"})]})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.Zb,{className:"bg-gray-800 border-gray-700",children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ll,{className:"text-sm font-medium text-white",children:"Posts This Month"}),(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCDD"})]}),(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:s.postsThisMonth}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"AI-generated content created"})]})]}),(0,a.jsxs)(i.Zb,{className:"bg-gray-800 border-gray-700",children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ll,{className:"text-sm font-medium text-white",children:"Organizations"}),(0,a.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFE2"})]}),(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:s.organizationsCount}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"Active organizations"})]})]}),(0,a.jsxs)(i.Zb,{className:"bg-gray-800 border-gray-700",children:[(0,a.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ll,{className:"text-sm font-medium text-white",children:"Social Accounts"}),(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD17"})]}),(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:s.socialAccountsCount}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"Connected platforms"})]})]})]})}),(0,a.jsxs)(i.Zb,{className:"bg-gray-800 border-gray-700",children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsx)(i.ll,{className:"text-white",children:u?"Admin Actions":"Quick Actions"}),(0,a.jsx)(i.SZ,{className:"text-gray-300",children:u?"System management and monitoring tools":"Get started with creating new content"})]}),(0,a.jsx)(i.aY,{children:(0,a.jsx)("div",{className:"flex flex-wrap gap-4",children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d(),{href:"/dashboard/organizations",children:(0,a.jsx)(l.z,{children:"Manage Organizations"})}),(0,a.jsx)(d(),{href:"/dashboard/subscriptions",children:(0,a.jsx)(l.z,{variant:"outline",children:"View Subscriptions"})}),(0,a.jsx)(d(),{href:"/dashboard/clients",children:(0,a.jsx)(l.z,{variant:"outline",children:"Manage Clients"})}),(0,a.jsx)(d(),{href:"/dashboard/analytics",children:(0,a.jsx)(l.z,{variant:"outline",children:"System Analytics"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d(),{href:"/dashboard/content/new",children:(0,a.jsx)(l.z,{children:"Create New Post"})}),(0,a.jsx)(d(),{href:"/dashboard/schedule",children:(0,a.jsx)(l.z,{variant:"outline",children:"Schedule Content"})}),(0,a.jsx)(d(),{href:"/dashboard/socials",children:(0,a.jsx)(l.z,{variant:"outline",children:"Connect Socials"})}),(0,a.jsx)(d(),{href:"/dashboard/billing",children:(0,a.jsx)(l.z,{variant:"outline",children:"Manage Billing"})})]})})})]}),(0,a.jsxs)(i.Zb,{className:"bg-gray-800 border-gray-700",children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsx)(i.ll,{className:"text-white",children:u?"All Recent Posts":"Recent Posts"}),(0,a.jsx)(i.SZ,{className:"text-gray-300",children:u?"Latest content from all organizations":"Your latest content creations"})]}),(0,a.jsx)(i.aY,{children:0===e.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-gray-400 mb-4",children:"No posts yet"}),(0,a.jsx)(d(),{href:"/dashboard/content/new",children:(0,a.jsx)(l.z,{children:"Create Your First Post"})})]}):(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,a.jsx)("div",{className:"border border-gray-600 rounded-lg p-4 bg-gray-700",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-medium text-white",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-300 mt-1 line-clamp-2",children:e.content}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-400",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded-full ".concat("published"===e.state?"bg-green-900 text-green-300":"scheduled"===e.state?"bg-yellow-900 text-yellow-300":"bg-gray-600 text-gray-300"),children:e.state}),(0,a.jsx)("span",{children:(0,c.p6)(e.created_at)})]})]}),(0,a.jsx)("div",{className:"ml-4",children:(0,a.jsx)(d(),{href:"/dashboard/content/".concat(e.id),children:(0,a.jsx)(l.z,{variant:"outline",size:"sm",children:"Edit"})})})]})},e.id))})})]})]})}},5754:function(e,t,s){"use strict";s.d(t,{z:function(){return o}});var a=s(7437),n=s(2265),r=s(7256),i=s(6061),l=s(1657);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=n.forwardRef((e,t)=>{let{className:s,variant:n,size:i,asChild:o=!1,...d}=e,x=o?r.g7:"button";return(0,a.jsx)(x,{className:(0,l.cn)(c({variant:n,size:i,className:s})),ref:t,...d})});o.displayName="Button"},7815:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return i},aY:function(){return d},ll:function(){return c}});var a=s(7437),n=s(2265),r=s(1657);let i=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});i.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...n})});l.displayName="CardHeader";let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",s),...n})});c.displayName="CardTitle";let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",s),...n})});o.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",s),...n})});d.displayName="CardContent",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",s),...n})}).displayName="CardFooter"},5922:function(e,t,s){"use strict";s.d(t,{O:function(){return c}});var a=s(5257),n=s(2601);let r="https://zkydbbarowexcqhsurky.supabase.co",i="your_supaba=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpreWRiYmFyb3dleGNxaHN1cmt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MjQwMTksImV4cCI6MjA3NDQwMDAxOX0.k9PDWkCirDd-9_C7KamuWOULqcuMjw1KuZz5wx95EPs",l=null,c=(0,a.eI)(r,i,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}});(0,a.eI)(r,n.env.SUPABASE_SERVICE_ROLE_KEY||i,{auth:{autoRefreshToken:!1,persistSession:!1}})},1657:function(e,t,s){"use strict";s.d(t,{cn:function(){return r},o0:function(){return l},p6:function(){return i}});var a=s(7042),n=s(4769);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.m6)((0,a.W)(t))}function i(e){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(new Date(e))}function l(e){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}).format(new Date(e))}}},function(e){e.O(0,[849,985,448,971,938,744],function(){return e(e.s=5621)}),_N_E=e.O()}]);