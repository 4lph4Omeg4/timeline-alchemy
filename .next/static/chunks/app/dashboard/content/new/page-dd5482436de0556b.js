(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[893],{8588:function(e,t,r){Promise.resolve().then(r.bind(r,7650))},7650:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var n=r(7437),a=r(2265),i=r(4033),s=r(5922),o=r(5754),l=r(5179),c=r(9842),d=r(3444),u=r(7815),f=r(2310),m=r(2601);let g=()=>{if(!m.env.OPENAI_API_KEY)throw Error("OPENAI_API_KEY is not set");return new f.ZP({apiKey:m.env.OPENAI_API_KEY})};async function p(e){let{prompt:t,type:r,tone:n="professional",length:a="medium",platform:i}=e,s="",o="";if("blog"===r)s="You are a professional content writer specializing in creating engaging blog posts with a non-dual perspective. \n    Write in a ".concat(n," tone. Create content that is ").concat(a," in length. Focus on unity, interconnectedness, and seeing beyond binary thinking."),o="Write a blog post about: ".concat(t);else{let e=i?" for ".concat(i):"";s="You are a social media expert creating engaging posts".concat(e,". \n    Write in a ").concat(n," tone. Keep it ").concat(a," and engaging."),o="Create a social media post about: ".concat(t)}try{var l,c,d;let e=g(),n=await e.chat.completions.create({model:"gpt-4",messages:[{role:"system",content:s},{role:"user",content:o}],temperature:.7,max_tokens:"blog"===r?2e3:500}),a=(null===(c=n.choices[0])||void 0===c?void 0:null===(l=c.message)||void 0===l?void 0:l.content)||"";if("blog"===r){let e=a.split("\n"),t=(null===(d=e.find(e=>e.trim()&&!e.startsWith("#")))||void 0===d?void 0:d.trim())||"Untitled";return{content:a.replace(t,"").trim(),title:t,suggestions:b(a)}}{let e=function(e,t){let r=e.toLowerCase().split(" ").filter(e=>e.length>3).slice(0,5).map(e=>"#".concat(e.replace(/[^a-z0-9]/g,"")));return t&&r.push(...{twitter:["#Twitter","#SocialMedia"],linkedin:["#LinkedIn","#Professional"],instagram:["#Instagram","#Visual"],facebook:["#Facebook","#Community"],youtube:["#YouTube","#Video"]}[t]||[]),r.slice(0,8)}(t,i);return{content:a,hashtags:e,suggestions:b(a)}}}catch(e){throw console.error("Error generating content:",e),Error("Failed to generate content")}}async function h(e){try{var t,r;let n=g(),a=await n.images.generate({model:"dall-e-3",prompt:"Professional, high-quality image: ".concat(e),n:1,size:"1024x1024",quality:"standard"});return(null===(r=a.data)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.url)||""}catch(e){throw console.error("Error generating image:",e),Error("Failed to generate image")}}function b(e){return["Add a call-to-action","Include relevant statistics","Add personal anecdotes"]}var x=r(5925);function v(){let[e,t]=(0,a.useState)(""),[r,f]=(0,a.useState)(""),[m,g]=(0,a.useState)(""),[b,v]=(0,a.useState)(!1),[y,w]=(0,a.useState)(!1),j=(0,i.useRouter)(),N=async()=>{if(!m.trim()){x.default.error("Please enter a prompt");return}v(!0);try{let e=await p({prompt:m,type:"blog",tone:"professional",length:"medium"});e.title&&t(e.title),f(e.content),x.default.success("Content generated successfully!")}catch(e){x.default.error("Failed to generate content")}finally{v(!1)}},I=async()=>{if(!e.trim()){x.default.error("Please enter a title first");return}v(!0);try{await h(e),x.default.success("Image generated successfully!")}catch(e){x.default.error("Failed to generate image")}finally{v(!1)}},C=async()=>{if(!e.trim()||!r.trim()){x.default.error("Please fill in all required fields");return}w(!0);try{let{data:{user:t}}=await s.O.auth.getUser();if(!t){x.default.error("Please sign in to save posts");return}let{data:n}=await s.O.from("org_members").select("org_id").eq("user_id",t.id).limit(1).single();if(!n){x.default.error("No organization found. Please create an organization first.");return}let{error:a}=await s.O.from("blog_posts").insert({org_id:n.org_id,title:e,content:r,state:"draft"});a?x.default.error("Failed to save post"):(x.default.success("Post saved successfully!"),j.push("/dashboard"))}catch(e){x.default.error("An unexpected error occurred")}finally{w(!1)}};return(0,n.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Content Editor"}),(0,n.jsx)("p",{className:"text-gray-600 mt-2",children:"Create amazing content with AI assistance"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,n.jsx)("div",{className:"lg:col-span-1",children:(0,n.jsxs)(u.Zb,{children:[(0,n.jsxs)(u.Ol,{children:[(0,n.jsx)(u.ll,{children:"AI Assistant"}),(0,n.jsx)(u.SZ,{children:"Generate content using AI"})]}),(0,n.jsxs)(u.aY,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(c._,{htmlFor:"prompt",children:"Content Prompt"}),(0,n.jsx)(d.g,{id:"prompt",placeholder:"Describe what you want to write about...",value:m,onChange:e=>g(e.target.value),rows:4})]}),(0,n.jsx)(o.z,{onClick:N,disabled:b,className:"w-full",children:b?"Generating...":"Generate Content"}),(0,n.jsx)(o.z,{variant:"outline",onClick:I,disabled:b||!e.trim(),className:"w-full",children:b?"Generating...":"Generate Image"})]})]})}),(0,n.jsx)("div",{className:"lg:col-span-2",children:(0,n.jsxs)(u.Zb,{children:[(0,n.jsxs)(u.Ol,{children:[(0,n.jsx)(u.ll,{children:"Post Editor"}),(0,n.jsx)(u.SZ,{children:"Write and edit your content"})]}),(0,n.jsxs)(u.aY,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(c._,{htmlFor:"title",children:"Title"}),(0,n.jsx)(l.I,{id:"title",placeholder:"Enter post title...",value:e,onChange:e=>t(e.target.value)})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(c._,{htmlFor:"content",children:"Content"}),(0,n.jsx)(d.g,{id:"content",placeholder:"Write your post content here...",value:r,onChange:e=>f(e.target.value),rows:20})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)(o.z,{variant:"outline",onClick:()=>j.push("/dashboard"),children:"Cancel"}),(0,n.jsx)(o.z,{onClick:C,disabled:y||!e.trim()||!r.trim(),children:y?"Saving...":"Save Post"})]})]})]})})]})]})}},5754:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var n=r(7437),a=r(2265),i=r(7256),s=r(6061),o=r(1657);let l=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:s,asChild:c=!1,...d}=e,u=c?i.g7:"button";return(0,n.jsx)(u,{className:(0,o.cn)(l({variant:a,size:s,className:r})),ref:t,...d})});c.displayName="Button"},7815:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return c},Zb:function(){return s},aY:function(){return d},ll:function(){return l}});var n=r(7437),a=r(2265),i=r(1657);let s=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});s.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...a})});o.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});l.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},5179:function(e,t,r){"use strict";r.d(t,{I:function(){return s}});var n=r(7437),a=r(2265),i=r(1657);let s=a.forwardRef((e,t)=>{let{className:r,type:a,...s}=e;return(0,n.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...s})});s.displayName="Input"},9842:function(e,t,r){"use strict";r.d(t,{_:function(){return s}});var n=r(7437),a=r(2265),i=r(1657);let s=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("label",{ref:t,className:(0,i.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r),...a})});s.displayName="Label"},3444:function(e,t,r){"use strict";r.d(t,{g:function(){return s}});var n=r(7437),a=r(2265),i=r(1657);let s=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...a})});s.displayName="Textarea"},5922:function(e,t,r){"use strict";r.d(t,{O:function(){return l}});var n=r(5257),a=r(2601);let i="https://zkydbbarowexcqhsurky.supabase.co",s="your_supaba=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpreWRiYmFyb3dleGNxaHN1cmt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MjQwMTksImV4cCI6MjA3NDQwMDAxOX0.k9PDWkCirDd-9_C7KamuWOULqcuMjw1KuZz5wx95EPs",o=null,l=(0,n.eI)(i,s,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}});(0,n.eI)(i,a.env.SUPABASE_SERVICE_ROLE_KEY||s,{auth:{autoRefreshToken:!1,persistSession:!1}})},1657:function(e,t,r){"use strict";r.d(t,{cn:function(){return i},o0:function(){return o},p6:function(){return s}});var n=r(7042),a=r(4769);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}function s(e){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(new Date(e))}function o(e){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}).format(new Date(e))}}},function(e){e.O(0,[849,985,197,971,938,744],function(){return e(e.s=8588)}),_N_E=e.O()}]);